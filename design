<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>ì„±ì‹ ì—¬ëŒ€ ìº í¼ìŠ¤ ì§€ë„</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      padding: 20px;
    }
    h1 {
      color: #8e44ad;
      text-align: center;
    }
    #map {
      width: 100%;
      height: 500px;
      margin-top: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .legend {
      margin: 0 auto;
      margin-top: 10px;
      width: 90%;
      max-width: 400px;
      background: #f8f8fc;
      border-radius: 8px;
      padding: 10px 16px;
      display: flex;
      gap: 16px;
      justify-content: center;
      font-size: 15px;
    }
    .legend span {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .icon-toilet { color: #2980b9; }
    .icon-vending { color: #e67e22; }
    .icon-water { color: #16a085; }
  </style>
</head>
<body>
  <h1>ì„±ì‹ ì—¬ëŒ€ ìº í¼ìŠ¤ ì§€ë„ ğŸ—ºï¸</h1>
  <div class="legend">
    <span><b style="color:#8e44ad;">â—</b> ê±´ë¬¼</span>
    <span class="icon-toilet">ğŸš» í™”ì¥ì‹¤</span>
    <span class="icon-vending">ğŸ¥¤ ìíŒê¸°</span>
    <span class="icon-water">ğŸ’§ ì •ìˆ˜ê¸°</span>
  </div>
  <div id="map"></div>
  

  <!-- ì¹´ì¹´ì˜¤ë§µ API -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=3bb811d698d8473f798fd1840a970d74&autoload=true"></script>

  <script>
    // ì§€ë„ ìƒì„±
    const container = document.getElementById('map');
    const options = {
      center: new kakao.maps.LatLng(37.591306, 127.022139),
      level: 3
    };
    const map = new kakao.maps.Map(container, options);

    // ê±´ë¬¼ ë°ì´í„°
    const buildings = [
      {
        name: 'í•™ìƒíšŒê´€',
        position: new kakao.maps.LatLng(37.592323, 127.021073),
        url: 'student-hall.html'
      },
      {
        name: 'ë‚œí–¥ê´€',
        position: new kakao.maps.LatLng(37.592253, 127.021268),
        url: 'nanhyang.html'
      },
      {
        name: 'ì„±ì‹ ì—­ì‚¬ê´€',
        position: new kakao.maps.LatLng(37.591599, 127.022076),
        url: 'sungshin.html'
      },
      {
        name: 'ì¤‘ì•™ë„ì„œê´€',
        position: new kakao.maps.LatLng(37.590830, 127.021616),
        url: 'library.html'
      },
      {
        name: 'ìˆ˜ì •ê´€',
        position: new kakao.maps.LatLng(37.5911993, 127.0228533),
        url: 'sujeong.html'
      },
      {
        name: 'ì¤‘ì•™ë°•ë¬¼ê´€',
        position: new kakao.maps.LatLng(37.591648, 127.021255),
        url: 'museum.html'
      }
    ];

    // ê±´ë¬¼ ë§ˆì»¤ í‘œì‹œ
    buildings.forEach(building => {
      const marker = new kakao.maps.Marker({
        map: map,
        position: building.position,
        title: building.name // íˆ´íŒ
      });

      const infowindow = new kakao.maps.InfoWindow({
        content: `
          <div style="
            padding: 8px 14px;
            background: white;
            border: 1px solid #888;
            border-radius: 10px;
            font-size: 14px;
            color: #2c3e50;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            white-space: nowrap;
          ">
            <b style="color:#8e44ad;">â—</b> ${building.name}
          </div>
        `
      });

      kakao.maps.event.addListener(marker, 'mouseover', function () {
        infowindow.open(map, marker);
      });

      kakao.maps.event.addListener(marker, 'mouseout', function () {
        infowindow.close();
      });

      kakao.maps.event.addListener(marker, 'click', function () {
        window.open(building.url, '_blank');
      });
    });

    
    // ì‹œì„¤ë³„ ì•„ì´ì½˜
    function getFacilityIcon(type) {
      if (type === 'toilet') return 'ğŸš»';
      if (type === 'vending') return 'ğŸ¥¤';
      if (type === 'water') return 'ğŸ’§';
      return '';
    }
    function getFacilityColor(type) {
      if (type === 'toilet') return '#2980b9';
      if (type === 'vending') return '#e67e22';
      if (type === 'water') return '#16a085';
      return '#333';
    }

    // ì‹œì„¤ ë§ˆì»¤ í‘œì‹œ
    facilities.forEach(facility => {
      const markerPosition = new kakao.maps.LatLng(facility.lat, facility.lng);
      const marker = new kakao.maps.Marker({
        position: markerPosition,
        map: map,
        title: facility.name
      });

      const infowindow = new kakao.maps.InfoWindow({
        content: `
          <div style="
            padding: 7px 12px;
            background: white;
            border: 1px solid ${getFacilityColor(facility.type)};
            border-radius: 8px;
            font-size: 13px;
            color: ${getFacilityColor(facility.type)};
            box-shadow: 0 2px 6px rgba(0,0,0,0.13);
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 4px;
          ">
            <span>${getFacilityIcon(facility.type)}</span> ${facility.name}
          </div>
        `
      });

      kakao.maps.event.addListener(marker, 'mouseover', function () {
        infowindow.open(map, marker);
      });

      kakao.maps.event.addListener(marker, 'mouseout', function () {
        infowindow.close();
      });

      kakao.maps.event.addListener(marker, 'click', function () {
        infowindow.open(map, marker);
      });
    });
    // ê¸°ì¡´ ê±´ë¬¼, ì‹œì„¤ ë°ì´í„°ëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©

// ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ í•¨ìˆ˜
function showFacilityList(type) {
  const listEl = document.getElementById('facility-list');
  let html = '';

  if (type === 'building') {
    html = `<b style="color:#8e44ad;">â—</b> <b>ê±´ë¬¼ ëª©ë¡</b><ul style="margin:10px 0 0 0;padding:0 0 0 16px;">` +
      buildings.map(b => `<li style="margin-bottom:4px;"><a href="${b.url}" target="_blank" style="color:#8e44ad;text-decoration:underline;">${b.name}</a></li>`).join('') +
      `</ul>`;
  } else {
    // ì‹œì„¤ë³„ ì´ëª¨ì§€ì™€ ì»¬ëŸ¬
    const icons = { toilet: 'ğŸš»', vending: 'ğŸ¥¤', water: 'ğŸ’§' };
    const colors = { toilet: '#2980b9', vending: '#e67e22', water: '#16a085' };
    const names = { toilet: 'í™”ì¥ì‹¤', vending: 'ìíŒê¸°', water: 'ì •ìˆ˜ê¸°' };
    const filtered = facilities.filter(f => f.type === type);

    html = `<span style="font-size:20px;color:${colors[type]}">${icons[type]}</span> <b style="color:${colors[type]}">${names[type]} ëª©ë¡</b>`;
    if (filtered.length === 0) {
      html += `<div style="margin-top:10px;">ë“±ë¡ëœ ${names[type]}ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
    } else {
      html += `<ul style="margin:10px 0 0 0;padding:0 0 0 16px;">` +
        filtered.map(f => `<li style="margin-bottom:4px;">${f.name}</li>`).join('') +
        `</ul>`;
    }
  }
  listEl.innerHTML = html;
  listEl.style.display = 'block';
}

// ë²”ë¡€ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.legend-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      showFacilityList(this.dataset.type);
    });
  });
});


  </script>
</body>
</html>

